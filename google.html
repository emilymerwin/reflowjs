

<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<link rel="stylesheet" type="text/css" href="base.css">
	<link rel="stylesheet" href="simple-slideshow-styles.css">
	<link rel="stylesheet" href="timeline.css">

	<script src="marked.js"></script>
	<script src="masonry.pkgd.min.js"></script>
	<script src="miso.ds.deps.ie.min.0.4.1.js"></script>
	<script src="better-simple-slideshow.min.js"></script>
	<script src="http://admin.brightcove.com/js/BrightcoveExperiences.js" type="text/javascript" ></script>

	<script>
		//settings
		
		//slideshow JS
	    var opts = {
            auto : false,
            fullScreen : false
        };
        
        var timelineRenderer = new marked.Renderer();
        
        timelineRenderer.list = function(body, ordered) {
  			var type = ordered ? 'ol' : 'ul';
  			if (ordered) {
  					return '<' + type + '>\n' + body + '</' + type + '>\n';
  			} else {
  				return '<' + type + ' class="timeline">\n' + body + '</' + type + '>\n';
			}
		};
		
		timelineRenderer.listitem = function(text) {
			dateRegex = /^((January|Jan\.?|February|Feb\.?|March|April|May|June|July|August|Aug\.?|September|Sept\.?|October|Oct\.?|November|Nov\.?|December|Dec\.?) ?(\d{1,2}(rd|nd|st)?\,? ?)?)?(\d{4})?$/;
			if (dateRegex.test(text)) {
				return '<li class="year">' + text + '</li>\n';
			} else {
  				return '<li class="event">' + text + '</li>\n';
  			}
		};

		marked.setOptions({
			smartypants: true,
		});


    </script>
	
	<script type="text/javascript">
	
		brightcove.createExperiences();
		var obitName = new RegExp(getParameterByName("name"),'i');
		var pckry = {};
		
		// responsive slideshow from Mark Lee
		// http://themarklee.com/2013/12/26/simple-diy-responsive-slideshow-made-html5-css3-javascript/
		

		var ds = new Miso.Dataset({
		  //comment out importer to use a local file
		  importer : Miso.Dataset.Importers.GoogleSpreadsheet,
	
		  //change url to correct local file name
		  //comment out url to use google spreadsheets
		  //url: 'curl.jsonp',
		  jsonp: true,
		  parser : Miso.Dataset.Parsers.GoogleSpreadsheet,
		  key : "1AMZOgPH3JQfXafxjmp6J9IUPvDV8IO-cnWURr-u52L8",
		  worksheet : "1"
		});

		ds.fetch({ 
		  success : function() {
		  	obitdata = ds.rows(function(row) {return obitName.test(row.mugshotName)}).toJSON()[0];
		  	init(obitdata);
		  	var container = document.querySelector('#content');
		  	pckry = new Packery( container, {
			  "column": 320,
			  "itemSelector": ".box", 
			  "gutter": 10,
			  
			  //"rowHeight": 20,
			  //"transitionDuration": "0.4s",	
			  });
			pack();
			var i = setInterval(pack, 100);
			setTimeout(function(){clearInterval(i)},5000);
brightcove.createExperiences();
		  },
		  error : function() {
			//console.log("Google data didn't load.");
		  }
		});
		

		
	
		var obitdata = {
			mugshotName: "President&nbsp;Andrew Jackson",
			mugshotDates: "1767&nbsp;-&nbsp;1845",
			mugshotPhoto: "jackson.jpg",
			bigMultimedia: '<iframe width="640" height="400" seamless="seamless" src="//www.youtube.com/embed/EGfxyeuy8u8" frameborder="0" allowfullscreen></iframe>',
			bigImage: "url.jpg",
			bigHeadline: "Death of the $20 president",
			bio: "<p>JACKSON, Andrew, a Representative and a Senator from Tennessee and 7th President of the United States; born on March 15, 1767; in the Waxhaw Settlement in South Carolina; attended an old-field school; though just a boy, participated in the battle of Hangingdler’s shop and afterward taught school; studied law in Salisbury, N.C.; admitted to the bar in 1787; moved to Jonesboro (now Tennessee) in 1788 and commenced practice; appointed solicitor of the western district of North Carolina, comprising what is now the State of Tennessee, in 1788; held the same position in the territorial government of Tennessee after 1791; delegate to the convention to frame a constitution for the new State 1796; upon the admission of Tennessee as a State into the Union was elected to the Fourth and Fifth Congresses and served from December 5, 1796, until his resignation in September 1797; elected as a Democratic Republican in September 1797 to the United States Senate for the term that had commenced March 4, 1797, and served from September 26, 1797, until his resignation in April 1798; judge of the State supreme court of Tennessee 1798-1804; engaged in planting and in mercantile pursuits; served in the Creek War of 1813 as commander of Tennessee forces; his victory in the Creek War brought him a commission as major general in the United States Army in May 1814; led his army to victory over the British in the Battle of New Orleans in January 1815; received the thanks of Congress and a gold medal by resolution of February 27, 1815; commanded an expedition which captured Florida in 1817; served as Governor of the new territory in 1821; again elected to the United States Senate and served from March 4, 1823, to October 14, 1825, when he resigned; chairman, Committee on Military Affairs (Eighteenth Congress); unsuccessful candidate for President in 1824; elected as a Democrat as President of the United States in 1828; reelected in 1832 and served from March 4, 1829, to March 3, 1837; retired to his country home, the ‘Hermitage,’ near Nashville, Tenn., where he died June 8, 1845; interment in the garden on his estate.</p>",
			boxOne:"<h2>\"Andrew Jackson engineered a genocide. He shouldn’t be on our currency.\"<br>--<a href='http://www.pressherald.com/2014/03/23/andrew_jackson_isn_t_worth_the_paper_he_s_printed_on_/'>Jillian Keenan</a></h2>",
			boxTwo: "<p>JACKSON, Andrew, a Representative and a Senator from Tennessee and 7th President of the United States; born on March 15, 1767; in the Waxhaw Settlement in South Carolina; attended an old-field school; though just a boy, participated in the battle of Hanging Rock during the Revolution, captured by the British and imprisoned; worked for a time in a saddler’s shop and afterward taught school;",
			boxThree: "<img src='staticmap.png'><h6>The Hermitage, Jackson's estate</h6>",
			boxFour: "",
			boxFive: "",
			boxSix: "<p>Jackson is the founder of the Democratic Party. He is best known for bringing the country through the 1832/1833 Nullification Crisis. He was controversial in his time, and his policy of 'Indian Removal' led to genocide against eastern Native American tribes. Despite that he remains a revered figure, particularly among Democrats, with his face on the $20 bill.</p>",
			boxSeven: "<iframe height='900' src='http://embed.contagiousmedia.com/embed/sub/the-new-york-times-innovation-report-n5mfds-4sov?uri=the-new-york-times-innovation-report-n5mfds-4sov&cb=1404601428' frameborder=0></iframe>",
			boxSeven: "",
			boxEight: "",
			boxNine: "",
			boxTen: "<h1>Indian removal, a deadly legacy</h1><p>During Jackson's presidency he enacted 'Indian Removal,' forcing all Native Americans in the eastern states (including Georgia) to move  west to the \"Indian Territory.\" The policy led to the infamous 1838 'Trail of Tears.' Here is his 1830 message to Congress:</p><iframe class='scribd_iframe_embed' src='//www.scribd.com/embeds/232646079/content?start_page=1&view_mode=scroll&show_recommendations=false' data-auto-height='false' data-aspect-ratio='undefined' scrolling='no' id='doc_18156' width='100%' height='600' frameborder='0'></iframe>",


			}

		var defaultdata = {
			mugshotName: "",
			mugshotDates: "",
			mugshotPhoto: "",
			bigMultimedia: '',
			bigImage: "",
			bigHeadline: "",
			bio: "",
			boxOne:"",
			boxTwo: "",
			boxThree: "", 
			boxFour: "",
			boxFive: "",
			boxSix: "",
			boxSeven: "",
			boxSeven: "",
			boxEight: "",
			boxNine: "",
			boxTen: "",
		}
		
		
		function brightcovePlayer(id) {
			html = '<!-- Start of Brightcove Player -->'
// 				+''
// 				+'<div style="display:none">'
// 				+'Janus Single Chromeless Player '
// 				+'</div>'
// 				+''
// 				+'<!--'
// 				+'By use of this code snippet, I agree to the Brightcove Publisher T and C '
// 				+'found at https://accounts.brightcove.com/en/terms-and-conditions/. '
// 				+'-->'
// 				+''
// 				//+'<script language="JavaScript" type="text/javascript" src="http://admin.brightcove.com/js/BrightcoveExperiences.js">\<\/script>'
// 				+''
				+'<object id="myExperience" class="BrightcoveExperience">'
				+'  <param name="bgcolor" value="#FFFFFF" />'
				+'  <param name="width" value="100%" />'
				+'  <param name="height" value="100%" />'
				+'  <param name="playerID" value="2418610043001" />'
				+'  <param name="playerKey" value="AQ~~,AAACLrx-GiE~,-R5NlQaAplIWhlMPcU5YDN5147VaN70m" />'
				+'  <param name="isVid" value="true" />'
				+'  <param name="isUI" value="true" />'
				+'  <param name="dynamicStreaming" value="true" />'
				+''
				+'  <param name="@videoPlayer" value="'+id+'" /> <!-- replace value with video ID -->'
				+'</object>'
// 				+''
// 				+'<!-- '
// 				+'This script tag will cause the Brightcove Players defined above it to be created as soon'
// 				+'as the line is read by the browser. If you wish to have the player instantiated only after'
// 				+'the rest of the HTML is processed and the page load is complete, remove the line.'
// 				+'-->'
// 				//+'<script type="text/javascript">brightcove.createExperiences();\<\/script>'
// 				+''
// 				+'<!-- End of Brightcove Player -->'
		
				return html;
			}
		
		
		function swap(id, content) {
			
			document.getElementById(id).innerHTML=content;
			//new_height = document.getElementById('inner'+id).clientHeight;
			//document.getElementById(id).style.height = new_height + "px";
			//pckry
					
		}
		
		function insert(id, content) {
			document.getElementById(id).innerHTML="<div>"+format(content)+"</div>";
			//new_height = document.getElementById('inner'+id).clientHeight;
			//document.getElementById(id).style.height = new_height + "px";
			//pckry
					
		}
		
		
		
		var boxen = ['bigMultimedia','boxOne','boxTwo','boxThree','boxFour','boxFive','boxSix',
						'boxSeven','boxEight','boxNine','boxTen',"mugshotPhoto",'mugshotBio',];
		var strings = ['bigHeadline', "mugshotName", "mugshotDates",];
		
		function swapLoop(id_list, data, fn) {
			for (i=0; i < id_list.length; i++) {
				val = id_list[i];
				if (data.hasOwnProperty(val)&data[val]!=""&data[val]!=null){
					//console.log(data[val]);
					fn(val, data[val]);
				} else {
				    document.getElementById(val).remove();
				}
			}
		}





		function bgImage(pagedata) {
			if (img.src) {
				bigDiv =  document.getElementById('bigPicture');
				bigDiv.style.backgroundImage = 'url('+pagedata.bigImage+')';
				if (document.body.clientWidth > img.width) {
					bigDiv.style.backgroundSize = 100 + "%";
				} else {
					bigDiv.style.backgroundSize = "";
				}
				
				if (img.height >= 500) {
					bigDiv.style.height = "500px";
				} else if (img.height >= 400) {
					bigDiv.style.height = "400px";
				} else if (img.height >= 300) {
					bigDiv.style.height = "300px";
					
				} else if (img.height >= 250) {
					bigDiv.style.height = "250px";
				} else {
					bigDiv.style.height = "250px";
					bigDiv.style.backgroundSize = 250/img.height * 100 + "%";
				}
			}
		}
		
		function init(pagedata) {
		

			img = new Image();
			if (pagedata.hasOwnProperty('bigImage')&pagedata.bigImage!="") {
				bigDiv =  document.getElementById('bigPicture');
				bigDiv.style.backgroundImage = 'url('+pagedata.bigImage+')';
				img.onload = function () {bgImage(pagedata)};
				img.src = pagedata.bigImage;
				document.getElementById('bigPicture').innerHTML = "<div>" + document.getElementById('bigPicture').innerHTML + "</div>";
			
			window.onresize = function () {bgImage(pagedata)};
			swapLoop(strings, pagedata, swap);
			swapLoop(boxen, pagedata, insert);
			document.body.style.display="";
			} else {}
				
		}

	
		
	


		function pack() {
			pckry.layout();
			//console.log('p');
		}
		
		
		
		function format(text) {
			//console.log(text);
			formatted = text;
			var isImage = /^\S*\.(jpg|png|gif)$/;
			var isBrightcove = /http:\/\/bcove.me.*/;
			var isBrightcoveId = /^\d+$/;
			var isYouTube = /^http:\/\/(youtu.be)|(youtube.com).*/;
			var isSlideshow = /^slideshow\:?\s*(\S*)/;
			var isTimeline = /^timeline\:?\n?/;
			var isLink = /^(http)?\:\/\/\S+\.\S+\s*$/;
			var isHTML = /^\<.*\>$/;
			if (isImage.test(text)) {
				formatted = "<img src='"+text+"'>";
			} else if (isBrightcove.test(text)) {
				// something
			} else if (isBrightcoveId.test(text)) {
				formatted = brightcovePlayer(text);
				
			} else if (isSlideshow.test(text)) {
				id = 'slid' + Math.round(Math.random()*10000);
				formatted ="<div id='"+id+"' class='"+id+" bss-slides'></div>";
				link = isSlideshow.exec(text)[1]
				slideshow(link, id);
				
			} else if (isTimeline.test(text)) {
				newText = text.replace(isTimeline,"");
				formatted = marked(newText, {renderer: timelineRenderer});
				
			}
			else if (isYouTube.test(text)) {
				//something else
			} else if (isLink.test(text)) {
				// iframe it
			} else if (isHTML.test(text)) {
				formatted = text; // leave it as is
			} else {
				formatted = marked(text);
			}
			return formatted;
		}


		/* parameter getter from james padolsey                                        */
		/* http://james.padolsey.com/javascript/bujs-1-getparameterbyname/             */
		function getParameterByName(name) {
 
			var match = RegExp('[?&]' + name + '=([^&]*)')
                    .exec(window.location.search);
 
			return match ?
				decodeURIComponent(match[1].replace(/\+/g, ' '))
				: null;
 
		}




	function slideshow(url, div) {
		var new_url = 'http://pipes.yahoo.com/pipes/pipe.run?_id=2FV68p9G3BGVbc7IdLq02Q&_render=json&feedcount=100&feedurl='+encodeURIComponent(url)+'&_callback=';
		//console.log(new_url);

		var slideds = new Miso.Dataset({ 
			url:  new_url,
			jsonp: true,
			extract: function(data){ return data.value.items;}
	
		});
		
		

		slideds.fetch({
			success: function() {
				el = document.getElementById(div);
				var a = "";
				slideds.each(function(row, rowIndex) {
					a +=  "<figure><img  width='100%' src='"+row.enclosure.url + "'>"
					a +=  "<figcaption>"
					a +=  row.description;
					a +=  "</figcaption></figure>";
  				});
  				el.innerHTML = a;
  				el.parentElement.outerHTML = el.outerHTML;
  				makeBSS('.'+div, opts);
  				pack();
  			}
  			
  		});
  		
  		
  	}
  			
	
	

			



	</script>



 
</head>
<body style="display:none;">
	<div id="bigPicture" class="fullwidth tall"><div><h1 id="bigHeadline"></h1></div></div>
	<div id="content" class="reflow">
			<div class="box" id="mugshot">
				<div id="mugshotPhoto"></div>
				<div id="mugshotCaption">
					<h2 id="mugshotName"></h2>
					<h3 id="mugshotDates"></h3>
					<div class="indentLeft" id="mugshotBio"></div>
				</div>
			</div>
			
			

			<div class="box w2col" id="bigMultimedia"></div>
			<div class="box w2col" id="boxOne"></div>	
			<div class="box w1col" id="boxTwo"></div>
			<div class="box w1col" id="boxThree"></div>
			<div class="box w1col" id="boxFour"></div>
			<div class="box w1col" id="boxFive"></div>
			<div class="box w2col" id="boxSix"></div>
			<div class="box w2col" id="boxSeven"></div>
		 	<div class="box w1col" id="boxEight"></div>
			<div class="box w1col" id="boxNine"></div>
			<div class="box w3col" id="boxTen"></div>


			
	</div>
	
	<script type="text/javascript">
	
	</script>
 
</body>
</html>